generator client {
  provider = "prisma-client-js"
  output   = "../../node_modules/@prisma/alertas-client"
}

datasource db {
  provider = "postgresql"
  // url      = "file:./alertas.db"
  url     = env("DATABASE_URL_ALERTAS")
}

model Alertas {
  id          Int      @id @default(autoincrement())
  titulo      String
  descricao   String
  importancia Importancia
  concluido   Boolean  @default(false)
  createdAt   DateTime @default(now())
  finishedAt  DateTime?
  criadorId   Int
  criadorNome String
  lojaId      Int

  destinatarios AlertaDestinatario[]
}
model AlertaDestinatario {
  id        Int     @id @default(autoincrement())
  alertaId  Int
  alerta    Alertas @relation(fields: [alertaId], references: [id], onDelete: Cascade)
  userId    Int

  @@unique([alertaId, userId])
  @@index([userId])
}

enum Importancia {
  BAIXA
  MEDIA
  ALTA
}